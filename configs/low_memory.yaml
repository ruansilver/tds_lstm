# ä½å†…å­˜é…ç½® - é€‚åˆæœåŠ¡å™¨æˆ–å†…å­˜å—é™ç¯å¢ƒ
# ä½¿ç”¨å°batch size + æ¢¯åº¦ç´¯ç§¯æ¥æ¨¡æ‹Ÿå¤§batchæ•ˆæœ

# æ•°æ®é…ç½®
data:
  dataset_path: "D:/Dataset/emg2pose_dataset_mini"
  hdf5_group: "emg2pose"
  table_name: "timeseries"
  stride: 2                                        # å¢åŠ æ­¥é•¿ï¼Œå‡å°‘æ ·æœ¬æ•°
  
  emg_channels: 16
  joint_angles_channels: 20
  window_size: 500
  
  split_ratio: [0.7, 0.15, 0.15]
  normalize: false
  shuffle: true
  
  # å†…å­˜ä¼˜åŒ–é…ç½®
  max_samples_for_normalize: 5000                  # ğŸ”´ æ›´å°‘çš„é‡‡æ ·æ•°ï¼ˆèŠ‚çœå†…å­˜ï¼‰
  chunk_cache_size: 33554432                       # ğŸ”´ æ›´å°çš„cacheï¼ˆ32MBï¼‰

# æ¨¡å‹é…ç½® - ä¸­ç­‰å¤§å°
model:
  input_size: 16
  output_size: 20
  dropout: 0.1
  
  # TDSç¼–ç å™¨ - 2ä¸ªstageï¼Œé€‚ä¸­é…ç½®
  tds_stages:
    - in_conv_kernel: 5
      in_conv_stride: 2
      num_blocks: 2
      channels: 8
      feature_width: 4
      kernel_width: 21
    - in_conv_kernel: 5
      in_conv_stride: 2
      num_blocks: 2
      channels: 8
      feature_width: 8
      kernel_width: 11
  
  # LSTMè§£ç å™¨ - é€‚ä¸­é…ç½®
  decoder_type: "sequential_lstm"
  decoder_hidden_size: 128
  decoder_num_layers: 2
  decoder_state_condition: true
  
  predict_velocity: false
  rollout_freq: 50
  original_sampling_rate: 2000

# è®­ç»ƒé…ç½® - ä½å†…å­˜ä¼˜åŒ–
training:
  num_epochs: 100
  batch_size: 16                                   # ğŸ”´ å‡å°batch sizeï¼ˆä»64é™åˆ°16ï¼‰
  learning_rate: 0.0005
  weight_decay: 0.01
  
  optimizer: "adamw"
  scheduler: "cosine"
  
  loss_type: "mse+mae"
  mae_weight: 0.5
  
  warmup_epochs: 5
  gradient_clip_norm: 1.0
  gradient_accumulation_steps: 4                   # ğŸ”´ ä½¿ç”¨æ¢¯åº¦ç´¯ç§¯æ¨¡æ‹Ÿbatch_size=64
  
  early_stopping: true
  patience: 20
  min_delta: 0.0001
  
  device: "auto"
  num_workers: 2                                   # ğŸ”´ å‡å°‘å·¥ä½œè¿›ç¨‹ï¼ˆä»4é™åˆ°2ï¼‰
  pin_memory: false                                # ğŸ”´ ç¦ç”¨pin_memoryèŠ‚çœå†…å­˜
  
  # å†…å­˜ä¼˜åŒ–é…ç½®
  persistent_workers: true                         # ä¿æŒworkeræŒä¹…åŒ–
  prefetch_factor: 1                               # ğŸ”´ å‡å°‘é¢„å–ï¼ˆèŠ‚çœå†…å­˜ï¼‰
  compute_metrics_online: true                     # ğŸ”´ å¿…é¡»åœ¨çº¿è®¡ç®—ï¼ˆèŠ‚çœå†…å­˜ï¼‰

# æ—¥å¿—é…ç½®
logging:
  checkpoint_dir: "checkpoints"
  log_dir: "logs"
  save_every: 5
  log_every: 50                                    # ğŸ”´ å‡å°‘æ—¥å¿—é¢‘ç‡
  save_best_only: true
  monitor: "val_loss"
  mode: "min"

